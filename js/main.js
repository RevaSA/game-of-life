!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n=.15,s={cell:5,cellWithBorder:20,border:1},o={cell:"firebrick",border:"white"};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e,i,s,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.row=i,this.col=s,this.x=o,this.y=r,this.isAlive=Math.random()<=n,this.wasAlive=this.isAlive,this.neighbors=[]}var e,i,l;return e=t,(i=[{key:"update",value:function(){var t=this.neighbors.reduce((function(t,e){return e.wasAlive?t+1:t}),0),e=!1;(this.wasAlive&&(2===t||3===t)||!this.wasAlive&&3===t)&&(e=!0),this.isAlive=e}},{key:"updatePrevious",value:function(){this.wasAlive=this.isAlive}},{key:"draw",value:function(){this.isAlive&&(this.ctx.fillStyle=o.cell,this.ctx.fillRect(this.x,this.y,s.cell,s.cell))}}])&&r(e.prototype,i),l&&r(e,l),t}();function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.isDragging=!1,this.cellUnderMouse=null}var e,i,n;return e=t,(i=[{key:"updateSizes",value:function(t,e){this.countCol=Math.floor(t/s.cell),this.countRow=Math.floor(e/s.cell),this.w=this.countCol*s.cell,this.h=this.countRow*s.cell,this.x=Math.floor((t-this.w)/2),this.y=Math.floor((e-this.h)/2),this.updateCells()}},{key:"toggleDragging",value:function(){this.isDragging=!this.isDragging,this.isDragging||(this.cellUnderMouse=null)}},{key:"updateCursor",value:function(t){if(this.isDragging){var e=Math.max(Math.min(t.x-this.x,this.w),0),i=Math.max(Math.min(t.y-this.y,this.h),0),n=Math.floor(Math.max(i-1,0)/s.cell),o=Math.floor(Math.max(e-1,0)/s.cell);this.cellUnderMouse&&this.cellUnderMouse.row===n&&this.cellUnderMouse.col===o||(this.cellUnderMouse=this.cells[n][o],this.cellUnderMouse.isAlive=!0,this.cellUnderMouse.neighbors.forEach((function(t){t.isAlive=!0})))}}},{key:"updateCells",value:function(){this.cells=[];for(var t=0;t<this.countRow;t++){this.cells.push([]);for(var e=0;e<this.countCol;e++){var i=this.x+e*s.cell,n=this.y+t*s.cell;this.cells[t].push(new l(this.ctx,t,e,i,n))}}for(var o=0;o<this.countRow;o++)for(var r=0;r<this.countCol;r++)this.cells[o][r].neighbors=this.getNeighbors(o,r)}},{key:"getNeighbors",value:function(t,e){var i,n,s=[];for(i=-1;i<=1;i++)for(n=-1;n<=1;n++)if(0!==i||0!==n){var o=t+i,r=e+n;o=o<0?this.countRow-1:o>=this.countRow?0:o,r=r<0?this.countCol-1:r>=this.countCol?0:r,s.push(this.cells[o][r])}return s}},{key:"drawBorders",value:function(){var t,e,i,n;if(!(s.cell<s.cellWithBorder)){for(t=0;t<=this.countRow;t++)n=this.y+t*s.cell,this.drawLine(this.x,n,this.x+this.w,n);for(e=0;e<=this.countCol;e++)i=this.x+e*s.cell,this.drawLine(i,this.y,i,this.y+this.h)}}},{key:"drawLine",value:function(t,e,i,n){var r=this.ctx;r.beginPath(),r.strokeStyle=o.border,r.lineWidth=s.border,r.moveTo(t,e),r.lineTo(i,n),r.stroke()}},{key:"update",value:function(){for(var t=0;t<this.countRow;t++)for(var e=0;e<this.countCol;e++)this.cells[t][e].draw(),this.cells[t][e].updatePrevious();for(var i=0;i<this.countRow;i++)for(var n=0;n<this.countCol;n++)this.cells[i][n].update();this.drawBorders()}}])&&h(e.prototype,i),n&&h(e,n),t}();function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache(e),this.events(),this.resize(),requestAnimationFrame(this.loop.bind(this))}var e,i,n;return e=t,(i=[{key:"cache",value:function(t){this.canvas=document.querySelector(t.selector),this.ctx=this.canvas.getContext("2d"),this.field=new a(this.ctx)}},{key:"events",value:function(){window.addEventListener("resize",this.resize.bind(this)),document.addEventListener("mouseup",this.mouseUp.bind(this)),this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.mouseMove.bind(this))}},{key:"resize",value:function(){this.w=this.canvas.clientWidth,this.h=this.canvas.clientHeight,this.canvas.width=this.w,this.canvas.height=this.h,this.field.updateSizes(this.w,this.h)}},{key:"mouseUp",value:function(t){1===t.which&&this.field.toggleDragging()}},{key:"mouseDown",value:function(t){1===t.which&&(this.field.toggleDragging(),this.mouseMove(t))}},{key:"mouseMove",value:function(t){this.field.updateCursor({x:t.clientX,y:t.clientY})}},{key:"step",value:function(){this.ctx.clearRect(0,0,this.w,this.h),this.field.update()}},{key:"loop",value:function(){this.step(),requestAnimationFrame(this.loop.bind(this))}}])&&u(e.prototype,i),n&&u(e,n),t}();window.addEventListener("load",(function(){return new c({selector:"#canvas"})}))}]);
//# sourceMappingURL=main.js.map